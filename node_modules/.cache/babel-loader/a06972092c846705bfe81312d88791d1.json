{"ast":null,"code":"import * as firebase from 'firebase';\nimport 'firebase/firestore';\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAMCDK3Jh_ZOyS3OP8u-BZfmOj2ZjfuZGE\",\n  authDomain: \"food-delivery-bc3ad.firebaseapp.com\",\n  projectId: \"food-delivery-bc3ad\",\n  storageBucket: \"food-delivery-bc3ad.appspot.com\",\n  messagingSenderId: \"554604116256\",\n  appId: \"1:554604116256:web:6d80972bacb023e3663f45\",\n  measurementId: \"G-JXG82NFG5G\"\n}; // Initialize Firebase\n\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore();\n\nfunction signUp(userDetails) {\n  return new Promise((resolve, reject) => {\n    const {\n      userName,\n      userEmail,\n      userPassword,\n      userCity,\n      userCountry,\n      userGender,\n      userAge,\n      userProfileImage,\n      isRestaurant,\n      typeOfFood\n    } = userDetails;\n    firebase.auth().createUserWithEmailAndPassword(userDetails.userEmail, userDetails.userPassword).then(success => {\n      let user = firebase.auth().currentUser;\n      var uid;\n\n      if (user != null) {\n        uid = user.uid;\n      }\n\n      ;\n      firebase.storage().ref().child(`userProfileImage/${uid}/` + userProfileImage.name).put(userProfileImage).then(url => {\n        url.ref.getDownloadURL().then(success => {\n          // const userProfileImageUrl = success\n          // console.log(userProfileImageUrl)\n          const userDetailsForDb = {\n            userName: userName,\n            userEmail: userEmail,\n            userPassword: userPassword,\n            userCity: userCity,\n            userCountry: userCountry,\n            userGender: userGender,\n            userAge: userAge,\n            userUid: uid,\n            isRestaurant: isRestaurant,\n            // userProfileImageUrl: userProfileImageUrl,\n            typeOfFood: typeOfFood\n          };\n          db.collection(\"users\").doc(uid).set(userDetailsForDb).then(docRef => {\n            // console.log(\"Document written with ID: \", docRef.id);\n            if (userDetailsForDb.isRestaurant) {\n              userDetails.propsHistory.push(\"/order-requests\");\n              resolve(userDetailsForDb);\n            } else {\n              userDetails.propsHistory.push(\"/\");\n              resolve(userDetailsForDb);\n            }\n          }).catch(function (error) {\n            console.error(\"Error adding document: \", error);\n            reject(error);\n          });\n        }).catch(error => {\n          // Handle Errors here.\n          let errorCode = error.code;\n          let errorMessage = error.message;\n          console.log(\"Error in getDownloadURL function\", errorMessage);\n          reject(errorMessage);\n        });\n      }).catch(error => {\n        // Handle Errors here.\n        let errorCode = error.code;\n        let errorMessage = error.message;\n        console.log(\"Error in Image Uploading\", errorMessage);\n        reject(errorMessage);\n      });\n    }).catch(error => {\n      var errorMessage = error.message;\n      console.log(\"Error in Authentication\", errorMessage);\n      reject(errorMessage);\n    });\n  });\n}\n\nfunction logIn(userLoginDetails) {\n  return new Promise((resolve, reject) => {\n    const {\n      userLoginEmail,\n      userLoginPassword\n    } = userLoginDetails;\n    firebase.auth().signInWithEmailAndPassword(userLoginEmail, userLoginPassword).then(success => {\n      db.collection('users').doc(success.user.uid).get().then(snapshot => {\n        console.log(\"snapshot.data =>>\", snapshot.data().isRestaurant);\n\n        if (snapshot.data().isRestaurant) {\n          userLoginDetails.propsHistory.push(\"/order-requests\");\n          resolve(success);\n        } else {\n          userLoginDetails.propsHistory.push(\"/\");\n          resolve(success);\n        }\n      });\n    }).catch(error => {\n      // Handle Errors here.\n      // var errorCode = error.code;\n      var errorMessage = error.message;\n      reject(errorMessage);\n    });\n  });\n}\n\nfunction addItem(itemDetails) {\n  const {\n    itemTitle,\n    itemIngredients,\n    itemPrice,\n    itemImage,\n    chooseItemType\n  } = itemDetails;\n  return new Promise((resolve, reject) => {\n    let user = firebase.auth().currentUser;\n    var uid;\n\n    if (user != null) {\n      uid = user.uid;\n    }\n\n    ;\n    firebase.storage().ref().child(`itemImage/${uid}/` + itemImage.name).put(itemImage).then(url => {\n      url.ref.getDownloadURL().then(success => {\n        const itemImageUrl = success;\n        console.log(itemImageUrl);\n        const itemDetailsForDb = {\n          itemTitle: itemTitle,\n          itemIngredients: itemIngredients,\n          itemPrice: itemPrice,\n          itemImageUrl: itemImageUrl,\n          chooseItemType: chooseItemType // userUid: uid,\n\n        };\n        db.collection(\"users\").doc(uid).collection(\"menuItems\").add(itemDetailsForDb).then(docRef => {\n          // console.log(\"Document written with ID: \", docRef.id);\n          // itemDetails.propsHistory.push(\"/my-foods\");\n          resolve(\"Successfully added food item\");\n        }).catch(function (error) {\n          let errorCode = error.code;\n          let errorMessage = error.message;\n          reject(errorMessage); // console.error(\"Error adding document: \", error);\n        });\n      }).catch(error => {\n        // Handle Errors here.\n        let errorCode = error.code;\n        let errorMessage = error.message;\n        console.log(\"Error in getDownloadURL function\", errorCode);\n        console.log(\"Error in getDownloadURL function\", errorMessage);\n        reject(errorMessage);\n      });\n    }).catch(error => {\n      // Handle Errors here.\n      let errorCode = error.code;\n      let errorMessage = error.message;\n      console.log(\"Error in Image Uploading\", errorMessage);\n      reject(errorMessage);\n    });\n  });\n}\n\nfunction orderNow(cartItemsList, totalPrice, resDetails, userDetails, history) {\n  return new Promise((resolve, reject) => {\n    let user = firebase.auth().currentUser;\n    var uid;\n\n    if (user != null) {\n      uid = user.uid;\n    }\n\n    ;\n    const myOrder = {\n      itemsList: cartItemsList,\n      totalPrice: totalPrice,\n      status: \"PENDING\",\n      ...resDetails\n    };\n    const orderRequest = {\n      itemsList: cartItemsList,\n      totalPrice: totalPrice,\n      status: \"PENDING\",\n      ...userDetails\n    }; // console.log(\"myOrder => \", myOrder)\n    // console.log(\"orderRequest => \", orderRequest)\n\n    db.collection(\"users\").doc(uid).collection(\"myOrder\").add(myOrder).then(docRef => {\n      // console.log(docRef.id)\n      db.collection(\"users\").doc(resDetails.id).collection(\"orderRequest\").doc(docRef.id).set(orderRequest).then(docRef => {\n        // console.log(\"Document written with ID: \", docRef.id);\n        resolve('Successfully ordered'); // history.push(\"/my-orders\");\n      }).catch(function (error) {\n        console.error(\"Error adding document: \", error.message);\n        reject(error.message);\n      });\n    }).catch(function (error) {\n      console.error(\"Error adding document: \", error.message);\n      reject(error.message);\n    });\n  });\n}\n\nexport default firebase;\nexport { signUp, logIn, addItem, orderNow };","map":{"version":3,"sources":["/home/ashish/Desktop/resume_project/Food-delivery/src/config/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","db","firestore","signUp","userDetails","Promise","resolve","reject","userName","userEmail","userPassword","userCity","userCountry","userGender","userAge","userProfileImage","isRestaurant","typeOfFood","auth","createUserWithEmailAndPassword","then","success","user","currentUser","uid","storage","ref","child","name","put","url","getDownloadURL","userDetailsForDb","userUid","collection","doc","set","docRef","propsHistory","push","catch","error","console","errorCode","code","errorMessage","message","log","logIn","userLoginDetails","userLoginEmail","userLoginPassword","signInWithEmailAndPassword","get","snapshot","data","addItem","itemDetails","itemTitle","itemIngredients","itemPrice","itemImage","chooseItemType","itemImageUrl","itemDetailsForDb","add","orderNow","cartItemsList","totalPrice","resDetails","history","myOrder","itemsList","status","orderRequest","id"],"mappings":"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","sourcesContent":["import * as firebase from 'firebase';\nimport 'firebase/firestore'\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyAMCDK3Jh_ZOyS3OP8u-BZfmOj2ZjfuZGE\",\n    authDomain: \"food-delivery-bc3ad.firebaseapp.com\",\n    projectId: \"food-delivery-bc3ad\",\n    storageBucket: \"food-delivery-bc3ad.appspot.com\",\n    messagingSenderId: \"554604116256\",\n    appId: \"1:554604116256:web:6d80972bacb023e3663f45\",\n    measurementId: \"G-JXG82NFG5G\"\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nconst db = firebase.firestore();\n\nfunction signUp(userDetails) {\n    return new Promise((resolve, reject) => {\n        const { userName, userEmail, userPassword, userCity, userCountry, userGender, userAge, userProfileImage, isRestaurant, typeOfFood } = userDetails;\n        firebase.auth().createUserWithEmailAndPassword(userDetails.userEmail, userDetails.userPassword).then((success) => {\n            let user = firebase.auth().currentUser;\n            var uid;\n            if (user != null) {\n                uid = user.uid;\n            };\n            firebase.storage().ref().child(`userProfileImage/${uid}/` + userProfileImage.name).put(userProfileImage).then((url) => {\n                url.ref.getDownloadURL().then((success) => {\n                    // const userProfileImageUrl = success\n                    // console.log(userProfileImageUrl)\n                    const userDetailsForDb = {\n                        userName: userName,\n                        userEmail: userEmail,\n                        userPassword: userPassword,\n                        userCity: userCity,\n                        userCountry: userCountry,\n                        userGender: userGender,\n                        userAge: userAge,\n                        userUid: uid,\n                        isRestaurant: isRestaurant,\n                        // userProfileImageUrl: userProfileImageUrl,\n                        typeOfFood: typeOfFood,\n                    }\n                    db.collection(\"users\").doc(uid).set(userDetailsForDb).then((docRef) => {\n                        // console.log(\"Document written with ID: \", docRef.id);\n                        if(userDetailsForDb.isRestaurant){\n                            userDetails.propsHistory.push(\"/order-requests\");\n                            resolve(userDetailsForDb)\n                        }else{\n                            userDetails.propsHistory.push(\"/\");\n                            resolve(userDetailsForDb)\n                        }\n                    }).catch(function (error) {\n                        console.error(\"Error adding document: \", error);\n                        reject(error)\n                    })\n                }).catch((error) => {\n                    // Handle Errors here.\n                    let errorCode = error.code;\n                    let errorMessage = error.message;\n                    console.log(\"Error in getDownloadURL function\", errorMessage);\n                    reject(errorMessage)\n                })\n            }).catch((error) => {\n                // Handle Errors here.\n                let errorCode = error.code;\n                let errorMessage = error.message;\n                console.log(\"Error in Image Uploading\", errorMessage);\n                reject(errorMessage)\n            })\n        }).catch((error) => {\n            var errorMessage = error.message;\n            console.log(\"Error in Authentication\", errorMessage);\n            reject(errorMessage)\n        })\n    })\n}\n\nfunction logIn(userLoginDetails) {\n    return new Promise((resolve, reject) => {\n        const { userLoginEmail, userLoginPassword } = userLoginDetails;\n        firebase.auth().signInWithEmailAndPassword(userLoginEmail, userLoginPassword).then((success) => {\n            db.collection('users').doc(success.user.uid).get().then((snapshot) => {\n                console.log(\"snapshot.data =>>\", snapshot.data().isRestaurant);\n                if(snapshot.data().isRestaurant){\n                    userLoginDetails.propsHistory.push(\"/order-requests\");\n                    resolve(success)\n                }else{\n                    userLoginDetails.propsHistory.push(\"/\");\n                    resolve(success)\n                }             \n            })\n        }).catch((error) => {\n            // Handle Errors here.\n            // var errorCode = error.code;\n            var errorMessage = error.message;\n            reject(errorMessage)\n        });\n\n    })\n}\n\nfunction addItem(itemDetails) {\n    const { itemTitle, itemIngredients, itemPrice, itemImage, chooseItemType, } = itemDetails;\n    return new Promise((resolve, reject) => {\n        let user = firebase.auth().currentUser;\n        var uid;\n        if (user != null) {\n            uid = user.uid;\n        };\n        firebase.storage().ref().child(`itemImage/${uid}/` + itemImage.name).put(itemImage).then((url) => {\n            url.ref.getDownloadURL().then((success) => {\n                const itemImageUrl = success\n                console.log(itemImageUrl)\n                const itemDetailsForDb = {\n                    itemTitle: itemTitle,\n                    itemIngredients: itemIngredients,\n                    itemPrice: itemPrice,\n                    itemImageUrl: itemImageUrl,\n                    chooseItemType: chooseItemType,\n                    // userUid: uid,\n                }\n                db.collection(\"users\").doc(uid).collection(\"menuItems\").add(itemDetailsForDb).then((docRef) => {\n                    // console.log(\"Document written with ID: \", docRef.id);\n                    // itemDetails.propsHistory.push(\"/my-foods\");\n                    resolve(\"Successfully added food item\")\n                }).catch(function (error) {\n                    let errorCode = error.code;\n                    let errorMessage = error.message;\n                    reject(errorMessage)\n                    // console.error(\"Error adding document: \", error);\n                })\n            }).catch((error) => {\n                // Handle Errors here.\n                let errorCode = error.code;\n                let errorMessage = error.message;\n                console.log(\"Error in getDownloadURL function\", errorCode);\n                console.log(\"Error in getDownloadURL function\", errorMessage);\n                reject(errorMessage)\n            })\n        }).catch((error) => {\n            // Handle Errors here.\n            let errorCode = error.code;\n            let errorMessage = error.message;\n            console.log(\"Error in Image Uploading\", errorMessage);\n            reject(errorMessage)\n        })\n    })\n}\n\nfunction orderNow(cartItemsList, totalPrice, resDetails, userDetails, history) {\n    return new Promise((resolve, reject) => {\n        let user = firebase.auth().currentUser;\n        var uid;\n        if (user != null) {\n            uid = user.uid;\n        };\n\n        const myOrder = {\n            itemsList: cartItemsList,\n            totalPrice: totalPrice,\n            status: \"PENDING\",\n            ...resDetails,\n        }\n\n        const orderRequest = {\n            itemsList: cartItemsList,\n            totalPrice: totalPrice,\n            status: \"PENDING\",\n            ...userDetails,\n        }\n\n        // console.log(\"myOrder => \", myOrder)\n        // console.log(\"orderRequest => \", orderRequest)\n        db.collection(\"users\").doc(uid).collection(\"myOrder\").add(myOrder).then((docRef) => {\n            // console.log(docRef.id)\n            db.collection(\"users\").doc(resDetails.id).collection(\"orderRequest\").doc(docRef.id).set(orderRequest).then((docRef) => {\n                // console.log(\"Document written with ID: \", docRef.id);\n                resolve('Successfully ordered')\n                // history.push(\"/my-orders\");\n            }).catch(function (error) {\n                console.error(\"Error adding document: \", error.message);\n                reject(error.message)\n            })\n        }).catch(function (error) {\n            console.error(\"Error adding document: \", error.message);\n            reject(error.message)\n        })\n    })\n}\n\nexport default firebase;\nexport {\n    signUp,\n    logIn,\n    addItem,\n    orderNow,\n}"]},"metadata":{},"sourceType":"module"}