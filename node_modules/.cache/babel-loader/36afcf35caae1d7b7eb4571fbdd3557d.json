{"ast":null,"code":"import * as firebase from 'firebase';\nimport 'firebase/firestore';\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAMCDK3Jh_ZOyS3OP8u-BZfmOj2ZjfuZGE\",\n  authDomain: \"food-delivery-bc3ad.firebaseapp.com\",\n  projectId: \"food-delivery-bc3ad\",\n  storageBucket: \"food-delivery-bc3ad.appspot.com\",\n  messagingSenderId: \"554604116256\",\n  appId: \"1:554604116256:web:6d80972bacb023e3663f45\",\n  measurementId: \"G-JXG82NFG5G\"\n}; // Initialize Firebase\n\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore();\nconsole.log(\"DB connected 1\");\n\nfunction signUp(userDetails) {\n  return new Promise((resolve, reject) => {\n    const {\n      userName,\n      userEmail,\n      userPassword,\n      userCity,\n      userCountry,\n      userGender,\n      userAge,\n      userProfileImage,\n      isRestaurant,\n      typeOfFood\n    } = userDetails;\n    firebase.auth().createUserWithEmailAndPassword(userDetails.userEmail, userDetails.userPassword).then(success => {\n      console.log(\"DB connected 2\");\n      let user = firebase.auth().currentUser;\n      var uid;\n\n      if (user != null) {\n        uid = user.uid;\n      }\n\n      ;\n      firebase.storage().ref().child(`userProfileImage/${uid}/` + userProfileImage.name).put(userProfileImage).then(url => {\n        url.ref.getDownloadURL().then(success => {\n          console.log(\"DB connected 3\");\n          const userProfileImageUrl = success;\n          console.log(userProfileImageUrl);\n          const userDetailsForDb = {\n            userName: userName,\n            userEmail: userEmail,\n            userPassword: userPassword,\n            userCity: userCity,\n            userCountry: userCountry,\n            userGender: userGender,\n            userAge: userAge,\n            userUid: uid,\n            isRestaurant: isRestaurant,\n            userProfileImageUrl: userProfileImageUrl,\n            typeOfFood: typeOfFood\n          };\n          db.collection(\"profile_photo\").doc(uid).set(userDetailsForDb).then(docRef => {\n            console.log(\"Document written with ID: \", docRef.id);\n\n            if (userDetailsForDb.isRestaurant) {\n              userDetails.propsHistory.push(\"/order-requests\");\n              resolve(userDetailsForDb);\n            } else {\n              userDetails.propsHistory.push(\"/\");\n              resolve(userDetailsForDb);\n            }\n          }).catch(function (error) {\n            console.error(\"Error adding document: \", error);\n            reject(error);\n          });\n        }).catch(error => {\n          // Handle Errors here.\n          let errorCode = error.code;\n          let errorMessage = error.message;\n          console.log(\"Error in getDownloadURL function\", errorMessage);\n          reject(errorMessage);\n        });\n      }).catch(error => {\n        // Handle Errors here.\n        let errorCode = error.code;\n        let errorMessage = error.message;\n        console.log(\"Error in Image Uploading\", errorMessage);\n        reject(errorMessage);\n      });\n    }).catch(error => {\n      var errorMessage = error.message;\n      console.log(\"Error in Authentication\", errorMessage);\n      reject(errorMessage);\n    });\n  });\n}\n\nfunction logIn(userLoginDetails) {\n  return new Promise((resolve, reject) => {\n    const {\n      userLoginEmail,\n      userLoginPassword\n    } = userLoginDetails;\n    firebase.auth().signInWithEmailAndPassword(userLoginEmail, userLoginPassword).then(success => {\n      db.collection('profile_photo').doc(success.user.uid).get().then(snapshot => {\n        console.log(\"snapshot.data =>>\", snapshot.data().isRestaurant);\n\n        if (snapshot.data().isRestaurant) {\n          userLoginDetails.propsHistory.push(\"/order-requests\");\n          resolve(success);\n        } else {\n          userLoginDetails.propsHistory.push(\"/\");\n          resolve(success);\n        }\n      });\n    }).catch(error => {\n      // Handle Errors here.\n      // var errorCode = error.code;\n      var errorMessage = error.message;\n      reject(errorMessage);\n    });\n  });\n}\n\nfunction addItem(itemDetails) {\n  const {\n    itemTitle,\n    itemIngredients,\n    itemPrice,\n    itemImage,\n    chooseItemType\n  } = itemDetails;\n  return new Promise((resolve, reject) => {\n    let user = firebase.auth().currentUser;\n    var uid;\n\n    if (user != null) {\n      uid = user.uid;\n    }\n\n    ;\n    firebase.storage().ref().child(`itemImage/${uid}/` + itemImage.name).put(itemImage).then(url => {\n      url.ref.getDownloadURL().then(success => {\n        const itemImageUrl = success;\n        console.log(itemImageUrl);\n        const itemDetailsForDb = {\n          itemTitle: itemTitle,\n          itemIngredients: itemIngredients,\n          itemPrice: itemPrice,\n          itemImageUrl: itemImageUrl,\n          chooseItemType: chooseItemType // userUid: uid,\n\n        };\n        db.collection(\"profile_photo\").doc(uid).collection(\"menuItems\").add(itemDetailsForDb).then(docRef => {\n          // console.log(\"Document written with ID: \", docRef.id);\n          // itemDetails.propsHistory.push(\"/my-foods\");\n          resolve(\"Successfully added food item\");\n        }).catch(function (error) {\n          let errorCode = error.code;\n          let errorMessage = error.message;\n          reject(errorMessage); // console.error(\"Error adding document: \", error);\n        });\n      }).catch(error => {\n        // Handle Errors here.\n        let errorCode = error.code;\n        let errorMessage = error.message;\n        console.log(\"Error in getDownloadURL function\", errorCode);\n        console.log(\"Error in getDownloadURL function\", errorMessage);\n        reject(errorMessage);\n      });\n    }).catch(error => {\n      // Handle Errors here.\n      let errorCode = error.code;\n      let errorMessage = error.message;\n      console.log(\"Error in Image Uploading\", errorMessage);\n      reject(errorMessage);\n    });\n  });\n}\n\nfunction orderNow(cartItemsList, totalPrice, resDetails, userDetails, history) {\n  return new Promise((resolve, reject) => {\n    let user = firebase.auth().currentUser;\n    var uid;\n\n    if (user != null) {\n      uid = user.uid;\n    }\n\n    ;\n    const myOrder = {\n      itemsList: cartItemsList,\n      totalPrice: totalPrice,\n      status: \"PENDING\",\n      ...resDetails\n    };\n    const orderRequest = {\n      itemsList: cartItemsList,\n      totalPrice: totalPrice,\n      status: \"PENDING\",\n      ...userDetails\n    }; // console.log(\"myOrder => \", myOrder)\n    // console.log(\"orderRequest => \", orderRequest)\n\n    db.collection(\"profile_photo\").doc(uid).collection(\"myOrder\").add(myOrder).then(docRef => {\n      // console.log(docRef.id)\n      db.collection(\"profile_photo\").doc(resDetails.id).collection(\"orderRequest\").doc(docRef.id).set(orderRequest).then(docRef => {\n        // console.log(\"Document written with ID: \", docRef.id);\n        resolve('Successfully ordered'); // history.push(\"/my-orders\");\n      }).catch(function (error) {\n        console.error(\"Error adding document: \", error.message);\n        reject(error.message);\n      });\n    }).catch(function (error) {\n      console.error(\"Error adding document: \", error.message);\n      reject(error.message);\n    });\n  });\n}\n\nexport default firebase;\nexport { signUp, logIn, addItem, orderNow };","map":{"version":3,"sources":["/home/ashish/Desktop/resume_project/Food-delivery/src/config/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","db","firestore","console","log","signUp","userDetails","Promise","resolve","reject","userName","userEmail","userPassword","userCity","userCountry","userGender","userAge","userProfileImage","isRestaurant","typeOfFood","auth","createUserWithEmailAndPassword","then","success","user","currentUser","uid","storage","ref","child","name","put","url","getDownloadURL","userProfileImageUrl","userDetailsForDb","userUid","collection","doc","set","docRef","id","propsHistory","push","catch","error","errorCode","code","errorMessage","message","logIn","userLoginDetails","userLoginEmail","userLoginPassword","signInWithEmailAndPassword","get","snapshot","data","addItem","itemDetails","itemTitle","itemIngredients","itemPrice","itemImage","chooseItemType","itemImageUrl","itemDetailsForDb","add","orderNow","cartItemsList","totalPrice","resDetails","history","myOrder","itemsList","status","orderRequest"],"mappings":"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","sourcesContent":["import * as firebase from 'firebase';\nimport 'firebase/firestore'\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyAMCDK3Jh_ZOyS3OP8u-BZfmOj2ZjfuZGE\",\n    authDomain: \"food-delivery-bc3ad.firebaseapp.com\",\n    projectId: \"food-delivery-bc3ad\",\n    storageBucket: \"food-delivery-bc3ad.appspot.com\",\n    messagingSenderId: \"554604116256\",\n    appId: \"1:554604116256:web:6d80972bacb023e3663f45\",\n    measurementId: \"G-JXG82NFG5G\"\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nconst db = firebase.firestore();\nconsole.log(\"DB connected 1\");\nfunction signUp(userDetails) {\n    return new Promise((resolve, reject) => {\n        const { userName, userEmail, userPassword, userCity, userCountry, userGender, userAge, userProfileImage, isRestaurant, typeOfFood } = userDetails;\n        firebase.auth().createUserWithEmailAndPassword(userDetails.userEmail, userDetails.userPassword).then((success) => {\n            console.log(\"DB connected 2\");\n            let user = firebase.auth().currentUser;\n            var uid;\n            if (user != null) {\n                uid = user.uid;\n            };\n            firebase.storage().ref().child(`userProfileImage/${uid}/` + userProfileImage.name).put(userProfileImage).then((url) => {\n                url.ref.getDownloadURL().then((success) => {\n                    console.log(\"DB connected 3\");\n                    const userProfileImageUrl = success\n                    console.log(userProfileImageUrl)\n                    const userDetailsForDb = {\n                        userName: userName,\n                        userEmail: userEmail,\n                        userPassword: userPassword,\n                        userCity: userCity,\n                        userCountry: userCountry,\n                        userGender: userGender,\n                        userAge: userAge,\n                        userUid: uid,\n                        isRestaurant: isRestaurant,\n                        userProfileImageUrl: userProfileImageUrl,\n                        typeOfFood: typeOfFood,\n                    }\n                    db.collection(\"profile_photo\").doc(uid).set(userDetailsForDb).then((docRef) => {\n\n\n                        console.log(\"Document written with ID: \", docRef.id);\n                        if(userDetailsForDb.isRestaurant){\n                            userDetails.propsHistory.push(\"/order-requests\");\n                            resolve(userDetailsForDb)\n                        }else{\n                            userDetails.propsHistory.push(\"/\");\n                            resolve(userDetailsForDb)\n                        }\n                    }).catch(function (error) {\n                        console.error(\"Error adding document: \", error);\n                        reject(error)\n                    })\n                }).catch((error) => {\n                    // Handle Errors here.\n                    let errorCode = error.code;\n                    let errorMessage = error.message;\n                    console.log(\"Error in getDownloadURL function\", errorMessage);\n                    reject(errorMessage)\n                })\n            }).catch((error) => {\n                // Handle Errors here.\n                let errorCode = error.code;\n                let errorMessage = error.message;\n                console.log(\"Error in Image Uploading\", errorMessage);\n                reject(errorMessage)\n            })\n        }).catch((error) => {\n            var errorMessage = error.message;\n            console.log(\"Error in Authentication\", errorMessage);\n            reject(errorMessage)\n        })\n    })\n}\n\nfunction logIn(userLoginDetails) {\n    return new Promise((resolve, reject) => {\n        const { userLoginEmail, userLoginPassword } = userLoginDetails;\n        firebase.auth().signInWithEmailAndPassword(userLoginEmail, userLoginPassword).then((success) => {\n            db.collection('profile_photo').doc(success.user.uid).get().then((snapshot) => {\n                console.log(\"snapshot.data =>>\", snapshot.data().isRestaurant);\n                if(snapshot.data().isRestaurant){\n                    userLoginDetails.propsHistory.push(\"/order-requests\");\n                    resolve(success)\n                }else{\n                    userLoginDetails.propsHistory.push(\"/\");\n                    resolve(success)\n                }             \n            })\n        }).catch((error) => {\n            // Handle Errors here.\n            // var errorCode = error.code;\n            var errorMessage = error.message;\n            reject(errorMessage)\n        });\n\n    })\n}\n\nfunction addItem(itemDetails) {\n    const { itemTitle, itemIngredients, itemPrice, itemImage, chooseItemType, } = itemDetails;\n    return new Promise((resolve, reject) => {\n        let user = firebase.auth().currentUser;\n        var uid;\n        if (user != null) {\n            uid = user.uid;\n        };\n        firebase.storage().ref().child(`itemImage/${uid}/` + itemImage.name).put(itemImage).then((url) => {\n            url.ref.getDownloadURL().then((success) => {\n                const itemImageUrl = success\n                console.log(itemImageUrl)\n                const itemDetailsForDb = {\n                    itemTitle: itemTitle,\n                    itemIngredients: itemIngredients,\n                    itemPrice: itemPrice,\n                    itemImageUrl: itemImageUrl,\n                    chooseItemType: chooseItemType,\n                    // userUid: uid,\n                }\n                db.collection(\"profile_photo\").doc(uid).collection(\"menuItems\").add(itemDetailsForDb).then((docRef) => {\n                    // console.log(\"Document written with ID: \", docRef.id);\n                    // itemDetails.propsHistory.push(\"/my-foods\");\n                    resolve(\"Successfully added food item\")\n                }).catch(function (error) {\n                    let errorCode = error.code;\n                    let errorMessage = error.message;\n                    reject(errorMessage)\n                    // console.error(\"Error adding document: \", error);\n                })\n            }).catch((error) => {\n                // Handle Errors here.\n                let errorCode = error.code;\n                let errorMessage = error.message;\n                console.log(\"Error in getDownloadURL function\", errorCode);\n                console.log(\"Error in getDownloadURL function\", errorMessage);\n                reject(errorMessage)\n            })\n        }).catch((error) => {\n            // Handle Errors here.\n            let errorCode = error.code;\n            let errorMessage = error.message;\n            console.log(\"Error in Image Uploading\", errorMessage);\n            reject(errorMessage)\n        })\n    })\n}\n\nfunction orderNow(cartItemsList, totalPrice, resDetails, userDetails, history) {\n    return new Promise((resolve, reject) => {\n        let user = firebase.auth().currentUser;\n        var uid;\n        if (user != null) {\n            uid = user.uid;\n        };\n\n        const myOrder = {\n            itemsList: cartItemsList,\n            totalPrice: totalPrice,\n            status: \"PENDING\",\n            ...resDetails,\n        }\n\n        const orderRequest = {\n            itemsList: cartItemsList,\n            totalPrice: totalPrice,\n            status: \"PENDING\",\n            ...userDetails,\n        }\n\n        // console.log(\"myOrder => \", myOrder)\n        // console.log(\"orderRequest => \", orderRequest)\n        db.collection(\"profile_photo\").doc(uid).collection(\"myOrder\").add(myOrder).then((docRef) => {\n            // console.log(docRef.id)\n            db.collection(\"profile_photo\").doc(resDetails.id).collection(\"orderRequest\").doc(docRef.id).set(orderRequest).then((docRef) => {\n                // console.log(\"Document written with ID: \", docRef.id);\n                resolve('Successfully ordered')\n                // history.push(\"/my-orders\");\n            }).catch(function (error) {\n                console.error(\"Error adding document: \", error.message);\n                reject(error.message)\n            })\n        }).catch(function (error) {\n            console.error(\"Error adding document: \", error.message);\n            reject(error.message)\n        })\n    })\n}\n\nexport default firebase;\nexport {\n    signUp,\n    logIn,\n    addItem,\n    orderNow,\n}"]},"metadata":{},"sourceType":"module"}